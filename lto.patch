From a4809db6374a64ac114cc0de51369a9b023ea517 Mon Sep 17 00:00:00 2001
From: Victor Rodriguez <victor.rodriguez.bahena@intel.com>
Date: Mon, 24 Jul 2017 20:55:37 +0000
Subject: [PATCH] lto

Signed-off-by: Victor Rodriguez <victor.rodriguez.bahena@intel.com>
---
 Makefile.system                         | 10 +++++-----
 lapack-netlib/INSTALL/make.inc.gfortran |  6 +++---
 2 files changed, 8 insertions(+), 8 deletions(-)

diff --git a/Makefile.system b/Makefile.system
index bd361a1..81cc9af 100644
--- a/Makefile.system
+++ b/Makefile.system
@@ -203,10 +203,10 @@ endif
 
 ARFLAGS	=
 CPP	= $(COMPILER) -E
-AR	= $(CROSS_SUFFIX)ar
+AR	= $(CROSS_SUFFIX)gcc-ar
 AS	= $(CROSS_SUFFIX)as
 LD	= $(CROSS_SUFFIX)ld
-RANLIB	= $(CROSS_SUFFIX)ranlib
+RANLIB	= $(CROSS_SUFFIX)gcc-ranlib
 NM	= $(CROSS_SUFFIX)nm
 DLLWRAP = $(CROSS_SUFFIX)dllwrap
 OBJCOPY = $(CROSS_SUFFIX)objcopy
@@ -238,7 +238,7 @@ MD5SUM = md5 -n
 endif
 
 ifeq ($(OSNAME), Linux)
-EXTRALIB	+= -lm
+EXTRALIB	+= -lm -lgfortran
 NO_EXPRECISION = 1
 endif
 
@@ -1036,11 +1036,11 @@ FCOMMON_OPT += -g
 endif
 
 ifndef COMMON_OPT
-COMMON_OPT = -O2
+COMMON_OPT = -O3
 endif
 
 ifndef FCOMMON_OPT
-FCOMMON_OPT = -O2 -frecursive
+FCOMMON_OPT = -O3 -frecursive
 endif
 
 
diff --git a/lapack-netlib/INSTALL/make.inc.gfortran b/lapack-netlib/INSTALL/make.inc.gfortran
index ccd0994..ce85427 100644
--- a/lapack-netlib/INSTALL/make.inc.gfortran
+++ b/lapack-netlib/INSTALL/make.inc.gfortran
@@ -17,7 +17,7 @@ SHELL = /bin/sh
 #  should not compile LAPACK with flags such as -ffpe-trap=overflow.
 #
 FORTRAN  = gfortran
-OPTS     = -O2 -frecursive
+OPTS     = -O3 -march=sandybridge -frecursive
 DRVOPTS  = $(OPTS)
 NOOPT    = -O0 -frecursive
 LOADER   = gfortran
@@ -56,9 +56,9 @@ CFLAGS = -O3
 #  The archiver and the flag(s) to use when building archive (library)
 #  If you system has no ranlib, set RANLIB = echo.
 #
-ARCH     = ar
+ARCH     = gcc-ar
 ARCHFLAGS= cr
-RANLIB   = ranlib
+RANLIB   = gcc-ranlib
 #
 #  Location of the extended-precision BLAS (XBLAS) Fortran library
 #  used for building and testing extended-precision routines.  The
-- 
2.13.3

